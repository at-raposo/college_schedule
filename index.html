<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> BMAC - Estast√≠sca Economica(Grade Oficial)</title>
    <style>
        :root {
            --bg-body: #0f172a;
            --bg-card: #1e293b;
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --primary: #38bdf8;
            --secondary: #a855f7;
            --tertiary: #f59e0b;
            --success: #22c55e;
            --border: #334155;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            display: flex;
            min-height: 100vh;
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 340px;
            gap: 2rem;
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
            width: 100%;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        header h1 { color: var(--primary); margin-bottom: 0.5rem; }
        header p { color: var(--text-muted); }

        /* Estilo dos Blocos de Semestre */
        .semester-block {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border);
            margin-bottom: 1.5rem;
        }

        .semester-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
            color: var(--text-main);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .semester-type-badge {
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .badge-obg { background: rgba(56, 189, 248, 0.1); color: var(--primary); }
        .badge-elet { background: rgba(168, 85, 247, 0.1); color: var(--secondary); }
        .badge-livre { background: rgba(245, 158, 11, 0.1); color: var(--tertiary); }

        /* Lista de Mat√©rias */
        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 0.8rem;
        }

        .course-item {
            background: rgba(255,255,255, 0.02);
            border: 1px solid transparent;
            border-radius: 8px;
            padding: 10px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .course-item:hover {
            background: rgba(255,255,255, 0.05);
            border-color: var(--border);
        }

        /* Checkbox Customizado */
        .checkbox-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            padding-top: 2px;
        }

        input[type="checkbox"] {
            appearance: none;
            width: 18px;
            height: 18px;
            border: 2px solid var(--text-muted);
            border-radius: 4px;
            background: transparent;
            cursor: pointer;
            transition: all 0.2s;
        }

        input[type="checkbox"]:checked {
            background-color: var(--success);
            border-color: var(--success);
        }

        input[type="checkbox"]:checked::after {
            content: '‚úî';
            position: absolute;
            color: white;
            font-size: 12px;
            left: 3px;
            top: 3px;
        }

        .course-info { flex: 1; }
        .course-header { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 2px; }
        .code { font-family: monospace; font-weight: bold; color: var(--text-main); }
        .credits { font-size: 0.75rem; color: var(--text-muted); background: rgba(0,0,0,0.2); padding: 1px 6px; border-radius: 4px; }
        .name { font-size: 0.9rem; color: var(--text-muted); line-height: 1.3; }
        
        /* Highlight quando marcado */
        input[type="checkbox"]:checked ~ .course-info .name { text-decoration: line-through; opacity: 0.6; }
        input[type="checkbox"]:checked ~ .course-info .code { color: var(--success); }

        /* Painel Lateral (Sticky) */
        .sidebar {
            position: sticky;
            top: 2rem;
            height: fit-content;
            max-height: calc(100vh - 4rem);
            overflow-y: auto;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.5);
        }

        .summary-header { margin-bottom: 2rem; text-align: center; }
        .big-number { font-size: 3rem; font-weight: 800; color: var(--success); line-height: 1; }
        .big-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 0.5rem; }

        .stat-row { margin-bottom: 1.5rem; }
        .stat-meta { display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 0.85rem; color: var(--text-main); }
        
        .progress-track {
            background: #0f172a;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill { height: 100%; transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); }

        .search-bar {
            margin-bottom: 2rem;
            position: relative;
        }
        .search-input {
            width: 100%;
            padding: 12px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }
        .search-input:focus { outline: none; border-color: var(--primary); }

        /* Responsividade */
        @media (max-width: 1024px) {
            .container { grid-template-columns: 1fr; }
            .sidebar { 
                position: fixed; 
                bottom: 0; top: auto; left: 0; right: 0; 
                width: 100%; max-height: 30vh; 
                z-index: 100; border-radius: 16px 16px 0 0; 
                border-top: 2px solid var(--primary);
                display: grid; grid-template-columns: 1fr 2fr; gap: 1rem;
                padding: 1rem;
            }
            .summary-header { margin: 0; display: flex; flex-direction: column; justify-content: center; }
            .big-number { font-size: 2rem; }
            .main-content { padding-bottom: 250px; }
        }
    </style>
</head>
<body>

<div class="container">
    <main class="main-content">
        <header>
            <h1>BMAC - M√©todos Matem√°ticos</h1>
            <p>Grade Curricular Integral (Obrigat√≥rias + Optativas)</p>
        </header>

        <div class="search-bar">
            <input type="text" id="searchInput" class="search-input" placeholder="üîç Buscar mat√©ria (ex: C√°lculo, MAP, 3¬∫ sem)...">
        </div>

        <div id="curriculumContainer">
            </div>
    </main>

    <aside class="sidebar">
        <div class="summary-header">
            <div class="big-number" id="totalCredits">0</div>
            <div class="big-label">Cr√©ditos Totais Realizados</div>
        </div>

        <div class="stats-container">
            <div class="stat-row">
                <div class="stat-meta">
                    <span style="color: var(--primary)">Obrigat√≥rias</span>
                    <span id="txtObg">0 / 154</span>
                </div>
                <div class="progress-track">
                    <div class="progress-fill" id="barObg" style="width: 0%; background: var(--primary)"></div>
                </div>
            </div>

            <div class="stat-row">
                <div class="stat-meta">
                    <span style="color: var(--secondary)">Eletivas MAP</span>
                    <span id="txtElet">0 / 10</span>
                </div>
                <div class="progress-track">
                    <div class="progress-fill" id="barElet" style="width: 0%; background: var(--secondary)"></div>
                </div>
            </div>

            <div class="stat-row">
                <div class="stat-meta">
                    <span style="color: var(--tertiary)">Livres</span>
                    <span id="txtLivre">0 / 44</span>
                </div>
                <div class="progress-track">
                    <div class="progress-fill" id="barLivre" style="width: 0%; background: var(--tertiary)"></div>
                </div>
            </div>
            
            <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 1rem; text-align: center;">
                *Cr√©ditos somados: Aula + Trabalho
            </div>
        </div>
    </aside>
</div>

<script>
    // --- CONFIGURA√á√ÉO DE METAS (CHECKLIST) ---
    // Baseado na Carga Hor√°ria do texto:
    // Obrigat√≥rias: 2310h = 154 cr√©ditos
    // Eletivas: 150h = 10 cr√©ditos
    // Livres: 660h = 44 cr√©ditos
    const TARGETS = {
        obg: 154,
        elet: 10,
        livre: 44
    };

    // --- DADOS DA GRADE NA √çNTEGRA ---
    const curriculumData = [
        // --- OBRIGAT√ìRIAS (1¬∫ ao 8¬∫ Semestre) ---
        {
            title: "1¬∫ Per√≠odo Ideal", type: "obg",
            courses: [
                {code: "MAC0110", name: "Introdu√ß√£o √† Computa√ß√£o", cr: 4},
                {code: "MAE0121", name: "Introdu√ß√£o a Probabilidade e a Estat√≠stica I", cr: 4},
                {code: "MAP2110", name: "Introdu√ß√£o aos Modelos Lineares", cr: 6}, // 4+2
                {code: "MAT2453", name: "C√°lculo Diferencial e Integral I", cr: 6}
            ]
        },
        {
            title: "2¬∫ Per√≠odo Ideal", type: "obg",
            courses: [
                {code: "MAC0122", name: "Princ√≠pios de Desenvolvimento de Algoritmos", cr: 4},
                {code: "MAE0212", name: "Introdu√ß√£o √† Probabilidade e √† Estat√≠stica II", cr: 4},
                {code: "MAT2454", name: "C√°lculo Diferencial e Integral II", cr: 4},
                {code: "MAT3211", name: "√Ålgebra Linear", cr: 4}
            ]
        },
        {
            title: "3¬∫ Per√≠odo Ideal", type: "obg",
            courses: [
                {code: "MAE0228", name: "No√ß√µes de Probabilidade e Processos Estoc√°sticos", cr: 4},
                {code: "MAP2210", name: "Aplica√ß√µes de √Ålgebra Linear", cr: 6}, // 4+2
                {code: "MAP2216", name: "An√°lise Aplicada", cr: 5}, // 4+1
                {code: "MAT3120", name: "C√°lculo Diferencial e Integral III", cr: 4}
            ]
        },
        {
            title: "4¬∫ Per√≠odo Ideal", type: "obg",
            courses: [
                {code: "MAC0315", name: "Otimiza√ß√£o Linear", cr: 4},
                {code: "MAE0301", name: "Infer√™ncia Estat√≠stica Frequentista", cr: 6},
                {code: "MAP0217", name: "C√°lculo Diferencial", cr: 6},
                {code: "MAP2220", name: "Fundamentos de An√°lise Num√©rica", cr: 6} // 4+2
            ]
        },
        {
            title: "5¬∫ Per√≠odo Ideal", type: "obg",
            courses: [
                {code: "MAC0427", name: "Otimiza√ß√£o N√£o Linear", cr: 4},
                {code: "MAE0302", name: "Infer√™ncia Bayesiana", cr: 4},
                {code: "MAP0316", name: "Equa√ß√µes Diferenciais II", cr: 4},
                {code: "MAP0327", name: "Mec√¢nica Anal√≠tica Cl√°ssica", cr: 4}
            ]
        },
        {
            title: "6¬∫ Per√≠odo Ideal", type: "obg",
            courses: [
                {code: "MAP0413", name: "Equa√ß√µes de Derivadas Parciais", cr: 4},
                {code: "MAP2320", name: "M√©todos Num√©ricos em Equa√ß√µes Diferenciais II", cr: 6}, // 4+2
                {code: "MAT0225", name: "Fun√ß√µes Anal√≠ticas", cr: 4},
                {code: "MAT0234", name: "Medida e Integra√ß√£o", cr: 4}
            ]
        },
        {
            title: "7¬∫ Per√≠odo Ideal", type: "obg",
            courses: [
                {code: "MAP2419", name: "Introdu√ß√£o ao Trabalho de Formatura", cr: 5}, // 1+4
                {code: "MAT0334", name: "An√°lise Funcional", cr: 4}
            ]
        },
        {
            title: "8¬∫ Per√≠odo Ideal", type: "obg",
            courses: [
                {code: "MAP0416", name: "M√©todos Matem√°ticos da F√≠sica", cr: 4},
                {code: "MAP2429", name: "Trabalho de Formatura em Matem√°tica Aplicada", cr: 9} // 1+8
            ]
        },
        
        // --- OPTATIVAS ELETIVAS MAP ---
        {
            title: "Optativas Eletivas (MAP) - 5¬∫/6¬∫ Sem", type: "elet",
            courses: [
                {code: "MAP2313", name: "T√≥picos de Matem√°tica Aplicada", cr: 4},
                {code: "MAP2501", name: "T√≥picos de Matem√°tica Aplicada I", cr: 4},
                {code: "MAP2505", name: "T√≥picos de Matem√°tica Aplicada V", cr: 3}, // 2+1
                {code: "MAP2321", name: "T√©cnicas em Teoria de Controle", cr: 4},
                {code: "MAP2324", name: "Probabilidade Aplicada", cr: 5}, // 4+1
                {code: "MAP2502", name: "T√≥picos de Matem√°tica Aplicada II", cr: 4}
            ]
        },
        {
            title: "Optativas Eletivas (MAP) - 7¬∫/8¬∫ Sem", type: "elet",
            courses: [
                {code: "MAP2212", name: "Laborat√≥rio de Simula√ß√£o Estoc√°stica", cr: 6}, // 4+2
                {code: "MAP2322", name: "M√©todos Num. Eq. Diferenciais Parciais", cr: 6}, // 4+2
                {code: "MAP2503", name: "T√≥picos de Matem√°tica Aplicada III", cr: 5}, // 4+1
                {code: "MAP2504", name: "T√≥picos de Matem√°tica Aplicada", cr: 5} // 4+1
            ]
        },

        // --- OPTATIVAS LIVRES (Lista Completa do Texto) ---
        {
            title: "Optativas Livres - Iniciais (1¬∫ e 2¬∫ Sem)", type: "livre",
            courses: [
                {code: "ACA0115", name: "Introdu√ß√£o √†s Ci√™ncias Atmosf√©ricas", cr: 6}, // 4+2
                {code: "MAP0100", name: "Conceitos Introdut√≥rios de Matem√°tica", cr: 3}, // 2+1
                {code: "4310126", name: "F√≠sica I", cr: 6},
                {code: "AGA0106", name: "Astronomia de Posi√ß√£o", cr: 4},
                {code: "MAK0136", name: "Arte e Imagin√°rio Contempor√¢neo", cr: 4},
                {code: "MAK0138", name: "Monitoria em Arte Visual", cr: 4},
                {code: "MAK0139", name: "O Papel do Desenho na Arte", cr: 4},
                {code: "MAP2003", name: "Panoramas da Matem√°tica", cr: 4},
                {code: "MAT0164", name: "Teoria Elementar dos N√∫meros", cr: 4},
                {code: "QFL0605", name: "Qu√≠mica Geral", cr: 6}
            ]
        },
        {
            title: "Optativas Livres - 3¬∫ Semestre", type: "livre",
            courses: [
                {code: "4310137", name: "F√≠sica II", cr: 6},
                {code: "ACA0223", name: "Climatologia I", cr: 4},
                {code: "AGA0215", name: "Fundamentos de Astronomia", cr: 4},
                {code: "AGA0502", name: "Planetas e Sistemas Planet√°rios", cr: 4},
                {code: "MAC0323", name: "Algoritmos e Estruturas de Dados II", cr: 6}, // 4+2
                {code: "MAE0221", name: "Probabilidade I", cr: 6},
                {code: "MAK0132", name: "Arte do S√©culo XX no Acervo do MAC", cr: 4},
                {code: "MAK0133", name: "Interdisciplinaridade nas artes contempor√¢neas", cr: 4},
                {code: "MAP1021", name: "Atendimento de D√∫vidas de Ensino B√°sico I", cr: 2}, // 0+2
                {code: "MAP2001", name: "Matem√°tica, Arquitetura e Design", cr: 4},
                {code: "MAP2123", name: "M√©todos Matem√°ticos para Atu√°ria I", cr: 4},
                {code: "MAT0264", name: "An√©is e Corpos", cr: 4}
            ]
        },
        {
            title: "Optativas Livres - 4¬∫ Semestre", type: "livre",
            courses: [
                {code: "ACA0324", name: "Meteorologia F√≠sica I", cr: 4},
                {code: "ACA0522", name: "Meteorologia Sin√≥tica I", cr: 3},
                {code: "AGG0110", name: "Elementos de Geof√≠sica", cr: 4},
                {code: "AGG0209", name: "Introdu√ß√£o √† Petrof√≠sica", cr: 4},
                {code: "MAE0217", name: "Estat√≠stica Descritiva", cr: 4},
                {code: "MAE0224", name: "Probabilidade II", cr: 4},
                {code: "MAE0311", name: "Infer√™ncia Estat√≠stica", cr: 6},
                {code: "MAP1022", name: "Atendimento de D√∫vidas do Ensino B√°sico II", cr: 2}, // 0+2
                {code: "MAP2124", name: "M√©todos Matem√°ticos para Atu√°ria II", cr: 4},
                {code: "MAP2225", name: "Modelos em Atu√°ria e Finan√ßas", cr: 4}, // 2+2
                {code: "MAP2315", name: "Otimiza√ß√£o Linear", cr: 4},
                {code: "MAT0121", name: "C√°lculo Diferencial e Integral II", cr: 6},
                {code: "MAT0230", name: "Geometria e Desenho Geom√©trico I", cr: 5}, // 4+1
                {code: "MAT0265", name: "Grupos", cr: 4},
                {code: "MAT0326", name: "Geometria Diferencial I", cr: 4}
            ]
        },
        {
            title: "Optativas Livres - 5¬∫ Semestre", type: "livre",
            courses: [
                {code: "ACA0330", name: "Introdu√ß√£o √† Eletricidade Atmosf√©rica", cr: 4}, // 2+2
                {code: "ACA0410", name: "Introdu√ß√£o √† Qu√≠mica Atmosf√©rica", cr: 4},
                {code: "ACA0537", name: "Meteorologia Din√¢mica I", cr: 5},
                {code: "AGG0232", name: "S√≠smica I", cr: 4},
                {code: "AGG0243", name: "M√©todos Matem√°ticos em Geof√≠sica", cr: 6},
                {code: "IOF0201", name: "Fundamentos de Oceanografia Fisica", cr: 3},
                {code: "MAC0328", name: "Algoritmos em Grafos", cr: 4},
                {code: "MAC0329", name: "√Ålgebra Booleana", cr: 4},
                {code: "MAC0426", name: "Sistemas de Bancos de Dados", cr: 4},
                {code: "MAE0314", name: "An√°lise Estat√≠stica", cr: 4},
                {code: "MAE0315", name: "Tecnologia da Amostragem", cr: 4},
                {code: "MAE0317", name: "Planejamento e Pesquisa I", cr: 4},
                {code: "MAE0328", name: "An√°lise de Regress√£o", cr: 4},
                {code: "MAE0552", name: "Introdu√ß√£o √† Teoria da Informa√ß√£o", cr: 4},
                {code: "MAP0334", name: "C√°lculo Integral", cr: 4},
                {code: "MAP0431", name: "Intro. Matem√°tica √† Mec. dos Fluidos", cr: 4},
                {code: "MAP2314", name: "Teoria de Inf., Inf. Bayesiana e ML", cr: 4},
                {code: "MAP2427", name: "Otimiza√ß√£o N√£o Linear", cr: 4},
                {code: "MAT0240", name: "Geometria e Desenho Geom√©trico II", cr: 5}, // 4+1
                {code: "MAT0317", name: "Topologia", cr: 4},
                {code: "MAT0364", name: "Teoria de Galois", cr: 4},
                {code: "QBQ2500", name: "Bioqu√≠mica e Biologia Molecular", cr: 2}
            ]
        },
        {
            title: "Optativas Livres - 6¬∫ Semestre", type: "livre",
            courses: [
                {code: "4300307", name: "F√≠sica Matem√°tica II", cr: 4},
                {code: "AGA0309", name: "Mec√¢nica Celeste", cr: 4},
                {code: "MAC0325", name: "Otimiza√ß√£o Combinat√≥ria", cr: 4},
                {code: "MAC0414", name: "Aut√¥matos, Computabilidade e Complexidade", cr: 4},
                {code: "MAC0420", name: "Introdu√ß√£o a Computa√ß√£o Gr√°fica", cr: 4},
                {code: "MAE0326", name: "Aplica√ß√µes de Processos Estoc√°sticos", cr: 4},
                {code: "MAE0327", name: "Planejamento e Pesquisa II", cr: 4},
                {code: "MAE0330", name: "An√°lise Multivariada de Dados", cr: 6},
                {code: "MAT0349", name: "Introdu√ß√£o √† L√≥gica", cr: 4},
                {code: "MAT0418", name: "C√°lculo das Varia√ß√µes", cr: 4}
            ]
        },
        {
            title: "Optativas Livres - 7¬∫ Semestre", type: "livre",
            courses: [
                {code: "ACA0226", name: "Climatologia II", cr: 4},
                {code: "ACA0245", name: "Biometeorologia", cr: 6}, // 4+2
                {code: "ACA0336", name: "Meteorologia Ambiental", cr: 4},
                {code: "AGG0222", name: "F√≠sica do Interior da Terra", cr: 6}, // 4+2
                {code: "AGG0305", name: "Teoria de Ondas S√≠smicas", cr: 4},
                {code: "AGG0330", name: "Processamento de Sinais Digitais", cr: 4},
                {code: "IPN0001", name: "Radioprote√ß√£o em Aplica√ß√µes Nucleares", cr: 6}, // 4+2
                {code: "IPN0004", name: "Ger√™ncia de Rejeitos Radioativos", cr: 4}, // 3+1
                {code: "IPN0005", name: "Tratamento de √Ågua Industrial", cr: 3}, // 2+1
                {code: "IPN0006", name: "Engenharia de Reatores Nucleares", cr: 5}, // 2+3
                {code: "IPN0007", name: "Redes Neurais na Eng. Nuclear", cr: 5}, // 2+3
                {code: "IPN0012", name: "Caracteriza√ß√£o F√≠sica de Materiais", cr: 5}, // 3+2
                {code: "IPN0019", name: "Radioqu√≠mica", cr: 5}, // 2+3
                {code: "IPN0020", name: "Efeitos Biol√≥gicos das Radia√ß√µes", cr: 5}, // 2+3
                {code: "IPN0022", name: "Aplica√ß√µes da Radia√ß√£o Ionizante", cr: 5}, // 2+3
                {code: "IPN0024", name: "F√≠sica dos Materiais Estruturais", cr: 6}, // 4+2
                {code: "MAC0419", name: "M√©todos de Otimiza√ß√£o em Finan√ßas", cr: 4},
                {code: "MAC0422", name: "Sistemas Operacionais", cr: 6}, // 4+2
                {code: "MAC0436", name: "T√≥picos de Matem√°tica Discreta I", cr: 4},
                {code: "MAC0690", name: "T√≥picos em Combinat√≥ria Contempor√¢nea I", cr: 4},
                {code: "MAC0691", name: "T√≥picos na Teoria Alg√©brica dos Grafos", cr: 4},
                {code: "MAC0775", name: "M√©todos Probabil√≠sticos em Combinat√≥ria I", cr: 4},
                {code: "MAE0420", name: "Sociometria", cr: 4},
                {code: "MAE0510", name: "Demografia", cr: 4},
                {code: "MAE0515", name: "Introdu√ß√£o √† Teoria dos Jogos", cr: 4},
                {code: "MAE0523", name: "Elementos da Teoria das Decis√µes", cr: 4},
                {code: "MAE0530", name: "Introdu√ß√£o a An√°lise Sequ√™ncial", cr: 4},
                {code: "MAE0532", name: "Controle Estat√≠stico de Qualidade", cr: 4},
                {code: "MAE0535", name: "Pesquisa de Mercado", cr: 4},
                {code: "MAE0560", name: "An√°lise de Dados Categorizados", cr: 4},
                {code: "MAE0610", name: "T√≥picos Especiais de Estat√≠stica", cr: 4},
                {code: "MAP2411", name: "Matem√°tica Industrial I", cr: 4},
                {code: "MAT0223", name: "Introdu√ß√£o a Teoria dos N√∫meros", cr: 4},
                {code: "MAT0310", name: "Geometria III", cr: 4},
                {code: "MAT0330", name: "Teoria dos Conjuntos", cr: 4},
                {code: "MAT0359", name: "L√≥gica", cr: 4},
                {code: "MAT0425", name: "T√≥picos de Topologia Alg√©brica", cr: 4}
            ]
        },
        {
            title: "Optativas Livres - 8¬∫ Semestre", type: "livre",
            courses: [
                {code: "ACA0415", name: "O Clima da Terra", cr: 5}, // 4+1
                {code: "AGG0409", name: "Geomagnetismo", cr: 4},
                {code: "MAC0333", name: "Recupera√ß√£o de Informa√ß√£o", cr: 4},
                {code: "MAC0425", name: "Intelig√™ncia Artificial", cr: 6}, // 4+2
                {code: "MAC0536", name: "T√≥picos de Matem√°tica Discreta II", cr: 4},
                {code: "MAC0692", name: "T√≥picos em Combinat√≥ria Contempor√¢nea II", cr: 4},
                {code: "MAC0776", name: "M√©todos Probabil√≠sticos em Combinat√≥ria II", cr: 4},
                {code: "MAE0418", name: "Estat√≠stica Document√°ria", cr: 4},
                {code: "MAE0512", name: "Biometria", cr: 4},
                {code: "MAE0520", name: "Psicometria", cr: 4},
                {code: "MAP2421", name: "Matem√°tica Industrial II", cr: 4},
                {code: "MAP2432", name: "Princ. Computacionais em Din√¢mica de Fluidos", cr: 4},
                {code: "MAP2433", name: "Indu√ß√£o Estat√≠stica, Ontologia e Metaf√≠sica", cr: 4},
                {code: "MAT0427", name: "T√≥picos de Geometria Diferencial", cr: 4},
                {code: "MAT0431", name: "Introdu√ß√£o √† Topologia Alg√©brica", cr: 4},
                {code: "MAT0432", name: "Introdu√ß√£o √† Topologia Diferencial", cr: 4}
            ]
        }
    ];

    // L√≥gica da Aplica√ß√£o
    const container = document.getElementById('curriculumContainer');
    const searchInput = document.getElementById('searchInput');

    // Recuperar LocalStorage
    const savedData = JSON.parse(localStorage.getItem('bmac_tracker_full')) || [];

    function render(filter = "") {
        container.innerHTML = "";
        
        curriculumData.forEach(block => {
            // Filtragem
            const filteredCourses = block.courses.filter(c => 
                c.code.toLowerCase().includes(filter.toLowerCase()) || 
                c.name.toLowerCase().includes(filter.toLowerCase()) ||
                block.title.toLowerCase().includes(filter.toLowerCase())
            );

            if (filteredCourses.length === 0) return;

            // Criar Bloco
            const blockDiv = document.createElement('div');
            blockDiv.className = 'semester-block';
            
            // Badge Tipo
            let badgeClass = 'badge-obg';
            let badgeText = 'Obrigat√≥ria';
            if(block.type === 'elet') { badgeClass = 'badge-elet'; badgeText = 'Eletiva MAP'; }
            if(block.type === 'livre') { badgeClass = 'badge-livre'; badgeText = 'Opt. Livre'; }

            blockDiv.innerHTML = `
                <div class="semester-title">
                    ${block.title}
                    <span class="semester-type-badge ${badgeClass}">${badgeText}</span>
                </div>
                <div class="course-grid"></div>
            `;
            
            const grid = blockDiv.querySelector('.course-grid');

            filteredCourses.forEach(course => {
                const isChecked = savedData.includes(course.code) ? 'checked' : '';
                
                const label = document.createElement('label');
                label.className = 'course-item';
                label.innerHTML = `
                    <div class="checkbox-wrapper">
                        <input type="checkbox" 
                               data-code="${course.code}" 
                               data-cr="${course.cr}" 
                               data-type="${block.type}"
                               ${isChecked}>
                    </div>
                    <div class="course-info">
                        <div class="course-header">
                            <span class="code">${course.code}</span>
                            <span class="credits">${course.cr} cr</span>
                        </div>
                        <div class="name">${course.name}</div>
                    </div>
                `;
                grid.appendChild(label);
            });

            container.appendChild(blockDiv);
        });

        // Adicionar eventos aos novos checkboxes
        document.querySelectorAll('input[type="checkbox"]').forEach(box => {
            box.addEventListener('change', updateStats);
        });
    }

    function updateStats() {
        const checkboxes = document.querySelectorAll('input[type="checkbox"]');
        let totals = { obg: 0, elet: 0, livre: 0, grandTotal: 0 };
        let checkedCodes = [];

        checkboxes.forEach(box => {
            if (box.checked) {
                const cr = parseInt(box.dataset.cr);
                const type = box.dataset.type;
                
                if (totals[type] !== undefined) totals[type] += cr;
                totals.grandTotal += cr;
                checkedCodes.push(box.dataset.code);
            }
        });

        // Persist√™ncia
        localStorage.setItem('bmac_tracker_full', JSON.stringify(checkedCodes));

        // UI Updates
        document.getElementById('totalCredits').textContent = totals.grandTotal;

        updateBar('Obg', totals.obg, TARGETS.obg);
        updateBar('Elet', totals.elet, TARGETS.elet);
        updateBar('Livre', totals.livre, TARGETS.livre);
    }

    function updateBar(suffix, value, max) {
        const pct = Math.min((value / max) * 100, 100);
        document.getElementById(`bar${suffix}`).style.width = `${pct}%`;
        document.getElementById(`txt${suffix}`).textContent = `${value} / ${max}`;
    }

    // Evento de Busca
    searchInput.addEventListener('input', (e) => {
        render(e.target.value);
        recalculateFromData();
    });

    // Fun√ß√£o de c√°lculo "Robusta" que n√£o depende do DOM vis√≠vel (para quando filtrar)
    function recalculateFromData() {
        let totals = { obg: 0, elet: 0, livre: 0, grandTotal: 0 };
        const currentSaved = JSON.parse(localStorage.getItem('bmac_tracker_full')) || [];

        // Varre todos os dados originais
        curriculumData.forEach(block => {
            block.courses.forEach(c => {
                if (currentSaved.includes(c.code)) {
                    if (totals[block.type] !== undefined) totals[block.type] += c.cr;
                    totals.grandTotal += c.cr;
                }
            });
        });

        document.getElementById('totalCredits').textContent = totals.grandTotal;
        updateBar('Obg', totals.obg, TARGETS.obg);
        updateBar('Elet', totals.elet, TARGETS.elet);
        updateBar('Livre', totals.livre, TARGETS.livre);
    }

    // Override do updateStats para usar a fun√ß√£o robusta e salvar o state antes
    function updateStats(e) {
        // Atualizar o array de salvos baseados no clique atual
        let currentSaved = JSON.parse(localStorage.getItem('bmac_tracker_full')) || [];
        const code = e.target.dataset.code;
        
        if(e.target.checked) {
            if(!currentSaved.includes(code)) currentSaved.push(code);
        } else {
            currentSaved = currentSaved.filter(c => c !== code);
        }
        
        localStorage.setItem('bmac_tracker_full', JSON.stringify(currentSaved));
        recalculateFromData();
    }

    // Inicializa√ß√£o
    render();
    recalculateFromData();

</script>

</body>
</html>
